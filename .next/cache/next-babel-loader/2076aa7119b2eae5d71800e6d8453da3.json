{"ast":null,"code":"var _jsxFileName = \"/Users/christianorta/MyApps/arepa-store/components/CheckoutForm.jsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport axios from \"axios\";\nexport default function CheckoutForm() {\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const handleCardDetailsChange = event => {\n    event.error ? setCheckoutError(event.error.message) : setCheckoutError();\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      return;\n    } // const cardElement = elements.getElement(CardElement);\n\n\n    const {\n      error,\n      paymentMethod\n    } = await stripe.createPaymentMethod({\n      type: 'card',\n      card: elements.getElement(CardElement)\n    });\n\n    if (!error) {\n      const {\n        id\n      } = paymentMethod;\n      console.log('[PaymentMethod]', paymentMethod);\n\n      try {\n        const {\n          data\n        } = await axios.post(\"./api/paymentintent\", {\n          id,\n          amount: 250\n        });\n        console.log(data);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  return __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, __jsx(CardElement, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    disabled: !stripe,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, \"Pay\"));\n}\n;","map":{"version":3,"sources":["/Users/christianorta/MyApps/arepa-store/components/CheckoutForm.jsx"],"names":["React","useState","CardElement","useStripe","useElements","axios","CheckoutForm","stripe","elements","handleCardDetailsChange","event","error","setCheckoutError","message","handleSubmit","preventDefault","paymentMethod","createPaymentMethod","type","card","getElement","id","console","log","data","post","amount"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAAQC,WAAR,EAAqBC,SAArB,EAAgCC,WAAhC,QAAkD,yBAAlD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,YAAT,GAAwB;AACrC,QAAMC,MAAM,GAAGJ,SAAS,EAAxB;AACA,QAAMK,QAAQ,GAAGJ,WAAW,EAA5B;;AAEA,QAAMK,uBAAuB,GAAIC,KAAD,IAAW;AACzCA,IAAAA,KAAK,CAACC,KAAN,GAAcC,gBAAgB,CAACF,KAAK,CAACC,KAAN,CAAYE,OAAb,CAA9B,GAAsDD,gBAAgB,EAAtE;AACD,GAFD;;AAIA,QAAME,YAAY,GAAG,MAAOJ,KAAP,IAAiB;AACpCA,IAAAA,KAAK,CAACK,cAAN;;AAEA,QAAI,CAACR,MAAD,IAAW,CAACC,QAAhB,EAA0B;AACxB;AACD,KALmC,CAOpC;;;AAEA,UAAM;AAACG,MAAAA,KAAD;AAAQK,MAAAA;AAAR,QAAyB,MAAMT,MAAM,CAACU,mBAAP,CAA2B;AAC9DC,MAAAA,IAAI,EAAE,MADwD;AAE9DC,MAAAA,IAAI,EAAEX,QAAQ,CAACY,UAAT,CAAoBlB,WAApB;AAFwD,KAA3B,CAArC;;AAKA,QAAI,CAACS,KAAL,EAAY;AACR,YAAM;AAAEU,QAAAA;AAAF,UAASL,aAAf;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BP,aAA/B;;AAEA,UAAI;AACA,cAAM;AAACQ,UAAAA;AAAD,YAAS,MAAMnB,KAAK,CAACoB,IAAN,CAAW,qBAAX,EAAkC;AAACJ,UAAAA,EAAD;AAAKK,UAAAA,MAAM,EAAE;AAAb,SAAlC,CAArB;AACAJ,QAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACH,OAHD,CAGE,OAAOb,KAAP,EAAc;AAChBW,QAAAA,OAAO,CAACC,GAAR,CAAYZ,KAAZ;AACC;AACJ;AACF,GAzBD;;AA2BA,SACE;AAAM,IAAA,QAAQ,EAAEG,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,QAAQ,EAAE,CAACP,MAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFF,CADF;AAQD;AAAA","sourcesContent":["import React, {useState} from 'react';\nimport {CardElement, useStripe, useElements} from '@stripe/react-stripe-js';\nimport axios from \"axios\";\n\nexport default function CheckoutForm() {\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const handleCardDetailsChange = (event) => {\n    event.error ? setCheckoutError(event.error.message) : setCheckoutError();\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      return;\n    }\n\n    // const cardElement = elements.getElement(CardElement);\n\n    const {error, paymentMethod} = await stripe.createPaymentMethod({\n      type: 'card',\n      card: elements.getElement(CardElement),\n    });\n\n    if (!error) {\n        const { id } = paymentMethod; \n        console.log('[PaymentMethod]', paymentMethod);\n\n        try {\n            const {data} = await axios.post(\"./api/paymentintent\", {id, amount: 250})\n            console.log(data);\n        } catch (error) {\n        console.log(error);\n        }\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n        <CardElement />\n      <button type=\"submit\" disabled={!stripe}>\n        Pay\n      </button>\n    </form>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}